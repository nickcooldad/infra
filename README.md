# ШРИ Инфраструктура - Домашнее задание

[test pull request checks]

## Информация о сервере

**IP-адрес сервера:** `89.169.188.143`

**URL приложения:** [http://89.169.188.143:3000/hw/store](http://89.169.188.143:3000/hw/store)

## Автор

nickcooldad

## Описание CI/CD процессов

### 1. Проверка PR

- Запускается при создании/обновлении PR в main
- Параллельно выполняет линтинг и тесты
- Блокирует мердж при неуспешных проверках

### 2. Создание релиза (workflow_dispatch)

- Создает релизную ветку `releases/{version}`
- Собирает и пушит Docker образ в Yandex Container Registry
- Создает git тег
- Обновляет CHANGELOG.md
- Создает GitHub Issue с информацией о релизе

### 3. Фикс релиза (workflow_dispatch)

- Принимает версию релиза на вход
- Работает в ветке релиза
- Создает фикс-образ и тег
- Добавляет комментарий в Issue релиза

### 4. Деплой в продакшн (workflow_dispatch)

- Принимает версию релиза
- Проверяет наличие образа в реестре
- Деплоит на сервер через SSH
- Добавляет комментарий о деплое в Issue

## Настройка секретов

Для работы CI/CD необходимо настроить следующие секреты в GitHub:

- `YC_SA_JSON_CREDENTIALS` - JSON ключ сервисного аккаунта Yandex Cloud
- `YC_REGISTRY_ID` - ID Container Registry в Yandex Cloud
- `SERVER_HOST` - IP адрес сервера (89.169.188.143)
- `SERVER_USER` - имя пользователя на сервере (nickcooldad)
- `SERVER_SSH_KEY` - приватный SSH ключ для подключения к серверу

## Docker команды

```bash
# Сборка образа
npm run build:docker

# Запуск образа
npm run start:docker
```

## Локальный запуск

```bash
# Установка зависимостей.
npm ci

# Сборка клиентского кода.
npm run build

# Запуск сервера.
npm start
```

Приложение будет доступно по адресу: http://localhost:3000/hw/store
